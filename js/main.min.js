var url=location.href;if(-1!=url.indexOf("index.html")){function ispisNajpopularnijih(i){i.sort(function(i,e){return i.najpopularniji==e.najpopularniji?0:i.najpopularniji>e.najpopularniji?-1:1}),ispisNajnovijihNajpopularnijih(i.slice(0,5))}function ispisNajnovijih(i){i.sort(function(i,e){let a=new Date(i.najnoviji),o=new Date(e.najnoviji);return Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())}),ispisNajnovijihNajpopularnijih(i.slice(0,5))}function ispisNajnovijihNajpopularnijih(i){let e=`\n            <div class="col-lg-5 col-11 flex2 velikiBlok">\n                <img src="${i[0].slika.putanja}" alt="${i[0].marka} ${i[0].model}"/>\n                <h3>${i[0].marka} ${i[0].model}</h3>\n                <a href="#" class="nevidljiv dodajUKorpu" data-id="${i[0].id}"><i class="fas fa-shopping-cart"></i> Dodaj u korpu</a>\n            </div>\n            <div class="col-lg-6 col-11 flex3 prviRed">`;for(let a=1;a<i.length;a++)e+=`\n            <div class="col-12 col-sm-5 maliBlok flex2">\n                <img src="${i[a].slika.putanja}" alt="${i[a].marka} ${i[a].model}"/>\n                <h3>${i[a].marka} ${i[a].model}</h3>\n                <a href="#" class="nevidljiv dodajUKorpu" data-id="${i[a].id}"><i class="fas fa-shopping-cart"></i> Dodaj u korpu</a>\n            </div>`;e+="</div>",document.getElementById("sadrzaj").innerHTML=e,$(".dodajUKorpu").click(dodajUKorpu)}window.onload=function(){function i(){var i=$("#slajder .vidljiv"),e=i.next().length?$(".vidljiv").next():i.parent().children(":first");i.removeClass("vidljiv").addClass("nevidljiv"),e.addClass("vidljiv").removeClass("nevidljiv")}function e(){var i=$(".velikiBlok"),e=$(".maliBlok");a(i),a(e)}function a(i){$(i).hover(function(){$(this).find("a").stop(!0,!0).fadeIn(),$(this).find("img").stop(!0,!0).animate({opacity:.5},"slow"),$(this).find("h3").stop(!0,!0).animate({opacity:.5},"slow"),$(this).stop(!0,!0).css({boxShadow:"5px 5px 10px 5px #c2c2c2",transition:"box-shadow 1s"})},function(){$(this).find("a").stop(!0,!0).fadeOut(),$(this).find("img").stop(!0,!0).animate({opacity:1},"slow"),$(this).find("h3").stop(!0,!0).animate({opacity:1},"slow"),$(this).stop(!0,!0).css({boxShadow:"none"})})}function o(i){$(i).focus(function(){$(this).prev().css("color","rgb(115, 164, 255)")}),$(i).blur(function(){$(this).prev().css("color","rgb(0, 0, 0)")})}prikazMenija(),prikazSlajdera(),oNama(),$.ajax({url:"data/proizvodi.json",type:"GET",dataType:"json",success:function(i){ispisNajpopularnijih(i),e(),$("#najnovije").click(function(a){a.preventDefault(),$("#najpopularnije").removeClass("aktivan"),$("#najnovije").addClass("aktivan"),ispisNajnovijih(i),e()}),$("#najpopularnije").click(function(a){a.preventDefault(),$("#najnovije").removeClass("aktivan"),$("#najpopularnije").addClass("aktivan"),ispisNajpopularnijih(i),e()})},error:function(i){console.error(i)}}),function(){setInterval(function(){i()},1e4);var e=$(".strelicaDesno"),a=$(".strelicaLevo");e.click(function(){i()}),a.click(function(){var i=$("#slajder .vidljiv"),e=i.prev().length?$(".vidljiv").prev():i.parent().children(":last");i.removeClass("vidljiv").addClass("nevidljiv"),e.addClass("vidljiv").removeClass("nevidljiv")})}(),o($("input")),o($("textarea"))}}function podMeni(){$("#telefonija").hover(function(){$("#podMeniTelefonija").show()},function(){$("#podMeniTelefonija").hide()}),$("#podMeniTelefonija").hover(function(){$(this).show()},function(){$(this).hide()}),$("#telefonija").find("a").click(function(i){i.preventDefault()}),$("#bars").click(function(){$("#podMeni").slideToggle(),$("#bars").toggleClass("MeniBar")}),$("#podMeni ul a").click(function(){$(this).parent("li").children("ul").slideToggle("slow"),$(this).find("i").toggleClass("fas fa-angle-down"),$(this).find("i").toggleClass("fas fa-angle-up")})}function dodajUKorpu(i){i.preventDefault();let e=$(this).data("id"),a=[];localStorage.getItem("kupljenProizvod")?(a=JSON.parse(localStorage.getItem("kupljenProizvod"))).filter(i=>i.id==e).length?(a.forEach(i=>{i.id==e&&i.kolicina++}),upisiULocalStorage("kupljenProizvod",a)):(a.push({id:e,kolicina:1}),upisiULocalStorage("kupljenProizvod",a)):(a[0]={id:e,kolicina:1},upisiULocalStorage("kupljenProizvod",a)),brojProizvodaUKorpi()}function korpa(){let i="<div class='prazno flex'><h1>Vaša korpa je prazna <i class='fas fa-shopping-cart'></i></h1></div>",e=0;localStorage.getItem("kupljenProizvod")?$.ajax({url:"data/proizvodi.json",method:"get",dataType:"json",success:function(a){let o=JSON.parse(localStorage.getItem("kupljenProizvod")),t=a.filter(i=>{for(let e=0;e<o.length;e++)if(o[e].id==i.id)return i.kolicina=o[e].kolicina,!0});if(t.length){let i='\n                <table id="tabelaKupljenihProizvoda">\n                    <tr>\n                        <th>Slika</th>\n                        <th>Naziv</th>\n                        <th>Cena</th>\n                        <th>Količina</th>\n                        <th>Ukupna cena</th>\n                        <th>Ukloni</th>\n                    </tr>';t.forEach(a=>{i+=`<tr>\n                        <td><img class="thumbnail" src="${a.slika.thumbnail}" alt="${a.marka} ${a.model}"/></td>\n                        <td>${a.marka} ${a.model}</td>\n                        <td>${a.cena.nova} RSD</td>\n                        <td>${a.kolicina}</td>\n                        <td>${iznos(a.cena.nova,a.kolicina)} RSD</td>\n                        <td><a href="#" data-id="${a.id}">Ukloni</a></td>\n                    </tr>`,e+=parseInt(zbir(iznos(a.cena.nova,a.kolicina)))}),i+=`</table>\n                <div id="kupovina">\n                <div class="red"><h4>Ukupna cena: </h4> <p id="ukupnaCena"> ${e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")} RSD</p></div>\n                <a href="#" id="nastaviKupovinu">Nastavi kupovinu</a></div>\n                `,document.getElementById("proizvodi").innerHTML=i,$("#tabelaKupljenihProizvoda a").click(function(i){let e=$(this).data("id");i.preventDefault(),upisiULocalStorage("kupljenProizvod",JSON.parse(localStorage.getItem("kupljenProizvod")).filter(i=>i.id!=e)),korpa(),brojProizvodaUKorpi()})}else document.getElementById("proizvodi").innerHTML=i},error:function(i){console.error(i)}}):document.getElementById("proizvodi").innerHTML=i}function iznos(i,e){let a=i.replace(/(\.)/g,"")*e;return a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function zbir(i){return i.replace(/(\.)/g,"")}function brojProizvodaUKorpi(){if(localStorage.getItem("kupljenProizvod")){let i=JSON.parse(localStorage.getItem("kupljenProizvod"));if(i.length){let e=0;i.forEach(i=>{e+=i.kolicina}),$("#header .broj").text(e).css("display","flex")}else $("#header .broj").hide()}else $("#header .broj").hide()}function upisiULocalStorage(i,e){localStorage&&localStorage.setItem(i,JSON.stringify(e))}function sviProizvodi(){return JSON.parse(localStorage.getItem("proizvodi"))}function usteda(i,e){let a=i.replace(/(\.)/g,"")-e.replace(/(\.)/g,"");return a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function inputCheckbox(){let i=sviProizvodi(),e=[],a=[],o=[],t=[];i.forEach(i=>{e.includes(i.marka)||e.push(i.marka),a.includes(i.ramMemorija)||a.push(i.ramMemorija),o.includes(i.rezolucija.substr(0,14))||o.push(i.rezolucija.substr(0,14)),t.includes(i.internaMemorija)||t.push(i.internaMemorija)}),prikazCheckbox(e.sort(),"robnaMarka",".divRobneMarke"),prikazCheckbox(a.sort(),"ramMemorija",".divRamMemorije"),prikazCheckbox(o.sort(),"rezolucija",".divRezolucije"),prikazCheckbox(t.sort(),"internaMemorija",".divInterneMemorije")}function prikazCheckbox(i,e,a){let o="";i.forEach(i=>{o+=`<span><input type="checkbox" form="filtriranjeProizvoda" name="${e}" id="${e}${i}" value="${i}">\n        <label>${i}</label></span>`}),$(a).html(o)}function sortiraj(){let i=this.value,e=sviProizvodi();!localStorage.getItem("filtriraniProizvodi")||0==nizMarki.length&&0==nizRamMem.length&&0==nizIntMem.length&&0==nizRezolucija.length||(e=JSON.parse(localStorage.getItem("filtriraniProizvodi"))),e.sort(function(e,a){if("cenaDesc"==i){let i=parseFloat(e.cena.nova),o=parseFloat(a.cena.nova);return i==o?0:i>o?-1:1}if("cenaAsc"==i){let i=parseFloat(e.cena.nova),o=parseFloat(a.cena.nova);return i==o?0:i>o?1:-1}return"nazivAsc"==i?e.marka==a.marka?0:e.marka>a.marka?1:-1:"nazivDesc"==i?e.marka==a.marka?0:e.marka>a.marka?-1:1:void 0}),ispisProizvoda(e)}-1!=url.indexOf("telefoni.html")&&(prikazMenija(),tip("telefon"),prikaziFilter()),-1!=url.indexOf("tableti.html")&&(prikazMenija(),tip("tablet"),prikaziFilter()),-1!=url.indexOf("dozTelefon.html")&&(prikazMenija(),tip("dozTelefon"),prikaziFilter()),-1!=url.indexOf("dozTablet.html")&&(prikazMenija(),tip("dozTablet"),prikaziFilter()),-1!=url.indexOf("korpa.html")&&(prikazMenija(),korpa()),-1!=url.indexOf("autor.html")&&prikazMenija();var nizMarki=[],nizRamMem=[],nizRezolucija=[],nizIntMem=[];function svaFiltriranja(){return{filtriranjePoMarci:function(){let i=this.value;document.getElementById("search").value="",document.getElementById("sortiraj").value=0,nizMarki.includes(i)?nizMarki=nizMarki.filter(e=>e!=i):nizMarki.push(i);var e=sviProizvodi();let a;!localStorage.getItem("filtriraniProizvodi")||0==nizRamMem.length&&0==nizIntMem.length&&0==nizRezolucija.length||(e=JSON.parse(localStorage.getItem("filtriraniProizvodi"))),a=e.filter(function(i){if(0==nizMarki.length)return!0;for(let e=0;e<nizMarki.length;e++)if(i.marka==nizMarki[e])return!0}),0==nizMarki.length&&(a=sviProizvodi()),upisiULocalStorage("filtriraniProizvodiPoMarci",a),upisiULocalStorage("filtriraniProizvodi",a),a.length?ispisProizvoda(a):nemaProizvoda()},filtriranjePoIntMem:function(){let i=this.value;document.getElementById("search").value="",document.getElementById("sortiraj").value=0,nizIntMem.includes(i)?nizIntMem=nizIntMem.filter(e=>e!=i):nizIntMem.push(i);var e=sviProizvodi();let a;localStorage.getItem("filtriraniProizvodiPoMarci")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoMarci"))),localStorage.getItem("filtriraniProizvodiPoRamMem")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoRamMem"))),localStorage.getItem("filtriraniProizvodiPoRez")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoRez"))),a=e.filter(function(i){if(0==nizIntMem.length)return!0;for(let e=0;e<nizIntMem.length;e++)if(i.internaMemorija==nizIntMem[e])return!0}),0==nizIntMem.length&&0==nizRezolucija.length&&0==nizRamMem.length&&(a=JSON.parse(localStorage.getItem("filtriraniProizvodiPoMarci"))),upisiULocalStorage("filtriraniProizvodi",a),0==nizIntMem.length?localStorage.removeItem("filtriraniProizvodiPoIntMem"):upisiULocalStorage("filtriraniProizvodiPoIntMem",a),a.length?ispisProizvoda(a):nemaProizvoda()},filtriranjePoRamMem:function(){let i=this.value;document.getElementById("search").value="",document.getElementById("sortiraj").value=0,nizRamMem.includes(i)?nizRamMem=nizRamMem.filter(e=>e!=i):nizRamMem.push(i);var e=sviProizvodi();let a;localStorage.getItem("filtriraniProizvodiPoMarci")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoMarci"))),localStorage.getItem("filtriraniProizvodiPoIntMem")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoIntMem"))),localStorage.getItem("filtriraniProizvodiPoRez")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoRez"))),a=e.filter(function(i){if(0==nizRamMem.length)return!0;for(let e=0;e<nizRamMem.length;e++)if(i.ramMemorija==nizRamMem[e])return!0}),0==nizRamMem.length&&0==nizIntMem.length&&0==nizRezolucija.length&&(a=JSON.parse(localStorage.getItem("filtriraniProizvodiPoMarci"))),upisiULocalStorage("filtriraniProizvodi",a),0==nizRamMem.length?localStorage.removeItem("filtriraniProizvodiPoRamMem"):upisiULocalStorage("filtriraniProizvodiPoRamMem",a),a.length?ispisProizvoda(a):nemaProizvoda()},filtriranjePoRezoluciji:function(){let i=this.value;document.getElementById("search").value="",document.getElementById("sortiraj").value=0,nizRezolucija.includes(i)?nizRezolucija=nizRezolucija.filter(e=>e!=i):nizRezolucija.push(i);var e=sviProizvodi();let a;localStorage.getItem("filtriraniProizvodiPoMarci")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoMarci"))),localStorage.getItem("filtriraniProizvodiPoRamMem")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoRamMem"))),localStorage.getItem("filtriraniProizvodiPoIntMem")&&(e=JSON.parse(localStorage.getItem("filtriraniProizvodiPoIntMem"))),a=e.filter(function(i){if(0==nizRezolucija.length)return!0;for(let e=0;e<nizRezolucija.length;e++)if(i.rezolucija.substr(0,14)==nizRezolucija[e].substr(0,14))return!0}),0==nizRezolucija.length&&0==nizIntMem.length&&0==nizRamMem.length&&(a=JSON.parse(localStorage.getItem("filtriraniProizvodiPoMarci"))),0==nizRezolucija.length?localStorage.removeItem("filtriraniProizvodiPoRez"):upisiULocalStorage("filtriraniProizvodiPoRez",a),upisiULocalStorage("filtriraniProizvodi",a),a.length?ispisProizvoda(a):nemaProizvoda()},filtriranjeSearch:function(){$("input[type='checkbox']").prop("checked",!1),nizIntMem=[],nizMarki=[],nizRamMem=[],nizRezolucija=[];let i=this.value.trim().toLowerCase(),e=sviProizvodi();e=e.filter(e=>{if(-1!=(e.marka+" "+e.model).toLowerCase().indexOf(i))return!0}),""==i&&(e=sviProizvodi()),upisiULocalStorage("filtriraniProizvodi",e),e.length?ispisProizvoda(e):nemaProizvoda()}}}function tip(i){var e=svaFiltriranja();localStorage.removeItem("filtriraniProizvodiPoRamMem"),localStorage.removeItem("filtriraniProizvodiPoIntMem"),localStorage.removeItem("filtriraniProizvodiPoRez"),localStorage.removeItem("filtriraniProizvodi"),window.onload=function(){$.ajax({url:"data/proizvodi.json",type:"GET",dataType:"json",success:function(a){var o=a.filter(e=>e.tip==i);upisiULocalStorage("proizvodi",o),upisiULocalStorage("filtriraniProizvodiPoMarci",o),ispisProizvoda(sviProizvodi()),"telefon"==i||"tablet"==i?inputCheckbox():inputCheckbox2(),$("input[name='robnaMarka']").click(e.filtriranjePoMarci),$("input[name='ramMemorija']").click(e.filtriranjePoRamMem),$("input[name='internaMemorija']").click(e.filtriranjePoIntMem),$("input[name='rezolucija']").click(e.filtriranjePoRezoluciji)},error:function(i){console.error(i)}}),document.getElementById("sortiraj").addEventListener("change",sortiraj),document.getElementById("search").addEventListener("keyup",e.filtriranjeSearch)}}function ispisProizvoda(i){let e="";i.forEach(i=>{e+=`\n        <div class="col-lg-3 col-md-5 col-8  flex2 proizvod">\n            <img src="${i.slika.putanja}" alt="${i.marka} ${i.model} class="slikaProizvod">\n            <h3>${i.marka} ${i.model}</h3>`,"telefon"!=i.tip&&"tablet"!=i.tip||(e+=` \n                <ul>\n                    <li>Ekran: ${i.ekran}</li>\n                    <li>RAM Memorija: ${i.ramMemorija}</li>\n                    <li>Interna Memorija: ${i.internaMemorija}</li>\n                    <li>Kamera: ${i.kamera.zadnja}/${i.kamera.prednja}</li>\n                </ul> `),e+=`<p class="naStanju"> Na stanju</p>\n            <del class="staraCena">${i.cena.stara} RSD</del>\n            <p class="usteda">ušteda ${usteda(i.cena.stara,i.cena.nova)} RSD</p>\n            <h4 class="cena">${i.cena.nova} RSD</h4>\n            <a href="#" class="dodajUKorpu" data-id="${i.id}"><i class="fas fa-shopping-cart"></i> Dodaj u korpu</a>\n        </div>`}),document.getElementById("sadrzajProizvodi").innerHTML=e,$(".dodajUKorpu").click(dodajUKorpu)}function inputCheckbox2(){let i=sviProizvodi(),e=[];i.forEach(i=>{e.includes(i.marka)||e.push(i.marka)}),prikazCheckbox(e.sort(),"robnaMarka",".divRobneMarke")}function prikaziFilter(){$(".prikazi").click(function(){$(this).find("i").toggleClass("fas fa-angle-down"),$(this).find("i").toggleClass("fas fa-angle-up"),$(this).next().stop(!0,!0).slideToggle("slow")})}function provera(){let i=document.getElementById("imePrezime").value,e=document.getElementById("email").value,a=document.getElementById("telefon").value,o=document.getElementById("poruka").value,t=document.getElementById("razlogKontakta").value,n=0;return/^[A-Z][a-z]{2,19}(\s[A-Z][a-z]{2,19})+$/.test(i)?$("#greskaImePrezime").hide():($("#greskaImePrezime").show(),n++),/^[^@]+@[^@]+\.[^@\.]+$/.test(e)?$("#greskaEmail").hide():($("#greskaEmail").show(),n++),/^06\d{7,8}$/.test(a)?$("#greskaTelefon").hide():($("#greskaTelefon").show(),n++),/^[^@]+(\s[^@]+)*$/.test(o)?$("#greskaPoruka").hide():($("#greskaPoruka").show(),n++),0==t?($("#greskaRazlogKontakta").show(),n++):$("#greskaRazlogKontakta").hide(),!n}function oNama(){let i=document.createElement("h2");i.setAttribute("class","podnaslov"),i.append("O nama");let e=document.createElement("div");e.setAttribute("class","row flex3"),$.ajax({url:"data/oNama.json",method:"GET",dataType:"json",success:function(a){a.forEach(i=>{let a=document.createElement("div");a.setAttribute("class","col-10 col-md-3 blokONama");let o=document.createElement("img");o.setAttribute("src",i.slika.putanja),o.setAttribute("alt",i.slika.opis);let t=document.createElement("div"),n=document.createElement("h3"),r=document.createTextNode(i.naslov);n.appendChild(r);let l=document.createElement("p"),s=document.createTextNode(i.tekst);l.appendChild(s),t.appendChild(n),t.appendChild(l),a.appendChild(o),a.appendChild(t),e.append(a)}),document.getElementById("oNama").append(i),document.getElementById("oNama").append(e)},error:function(i){console.error(i)}})}function prikazSlajdera(){$.ajax({url:"data/slajder.json",method:"GET",dataType:"json",success:function(i){let e,a,o="";i.forEach((i,t)=>{a=1==t?"col-12":"col-10 col-md-7 col-lg-5",o+=`\n            <div class="col-12 slajderSlika${t+1} ${e=0==t?"vidljiv":"nevidljiv"}">\n            <img src="${i.slika.src}" alt="${i.slika.opis}"/>\n            <div class="${a} slikaTekst" id="${i.id}">\n                <h1>${i.naslov}</h1>\n                <p>${i.tekst}</p>\n                <a href="${i.link.putanja}">${i.link.tekst}</a>\n            </div>\n            </div>`}),document.getElementById("slajder").innerHTML=o},error:function(i){console.error(i)}})}function nemaProizvoda(){ispis="<div class='prazno flex'> <h1>Vaša pretraga nije dala rezultate. <i class='fas fa-search'></i></h1> </div>",document.getElementById("sadrzajProizvodi").innerHTML=ispis}function prikazMenija(){$.ajax({url:"data/meni.json",method:"GET",dataType:"json",success:function(i){let e=i.filter(i=>0==i.roditelj_id),a="<ul>";e.forEach(i=>{"Telefonija"==i.tekst?a+=`<li id="${i.tekst.toLowerCase()}"><a href="${i.href}">${i.tekst} <i class="fas fa-angle-down"></i></a></li>`:a+=`<li><a href="${i.href}">${i.tekst}</a></li>`}),a+="</ul>",document.getElementById("meni").innerHTML=a;let o="<ul>";function t(e){let a=i.filter(i=>i.roditelj_id==e),o="";return a.length&&(o+='<ul class="nevidljiv pl-4">',a.forEach(i=>{if(t(i.id))var e="<i class='fas fa-angle-down'></i>";else e="";o+=`<li><a href="${i.href}">${i.tekst} ${e}</a>`,o+=t(i.id),o+="</li>"}),o+="</ul>"),o}i.forEach(i=>{if(0==i.roditelj_id){if(t(i.id))var e="<i class='fas fa-angle-down'></i>";else e="";o+=`<li><a href="${i.href}">${i.tekst} ${e}</a>`,o+=t(i.id),o+="</li>"}}),o+="</ul>",document.getElementById("podMeni").innerHTML=o,podMeni(),brojProizvodaUKorpi()},error:function(i){console.error(i)}})}